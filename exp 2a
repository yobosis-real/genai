from tensorflow.keras.models import Model
from tensorflow.keras.layers import Input, Dense
from sklearn.feature_extraction.text import TfidfVectorizer
import numpy as np

# Sample phishing emails
emails = [
    "Your account has been suspended. Click here to verify.",
    "Urgent: Update your billing information.",
    "You've won a prize! Claim now.",
    "Reset your password immediately."
]

# Vectorize
vec = TfidfVectorizer()
X = vec.fit_transform(emails).toarray()
inp_dim = X.shape[1]

# Autoencoder
inp = Input(shape=(inp_dim,))
enc = Dense(8, activation="relu")(inp)
dec = Dense(inp_dim, activation="sigmoid")(enc)
model = Model(inp, dec)
model.compile(optimizer="adam", loss="mse")

# Train
model.fit(X, X, epochs=50, verbose=0)

# Generate phishingâ€‘like outputs
out = model.predict(X)

# Decode (top words)
vocab = vec.get_feature_names_out()

for v in out:
    top = np.argsort(v)[-5:][::-1]
    words = [vocab[i] for i in top]
    print("Generated email:", " ".join(words))
